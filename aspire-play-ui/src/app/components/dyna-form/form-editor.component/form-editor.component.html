
<div class="form-editor">
  <h3>Form Editor</h3>

  <div
    cdkDropList
    #formEditorDropZone="cdkDropList"
    id="formEditorDropZone"
    [cdkDropListData]="formFields"
    [cdkDropListConnectedTo]="['componentsList']"
    (cdkDropListDropped)="drop($event)"
    class="drop-zone"
    [class.empty]="formFields.length === 0">

    @if (formFields.length === 0) {
      <div class="empty-state">
        <p>Drag and drop components here to build your form</p>
      </div>
    }

    @for (field of formFields; track field.id; let idx = $index) {
      <div
        cdkDrag
        [cdkDragData]="field"
        class="form-field">

        <div class="field-content">
          <span class="drag-handle material-icons" cdkDragHandle>drag_indicator</span>

          <div class="field-info">
            <strong>{{ field.id }}</strong>
            <small>Type: {{ field.type }}</small>
          </div>

          <button
            class="remove-btn"
            (click)="removeField(idx)"
            type="button">
            <span class="material-icons">delete</span>
          </button>
        </div>
      </div>
    }
  </div>

  @if (formFields.length > 0) {
    <div class="form-preview">
      <h4>Form Configuration</h4>
      <pre>{{ getFormConfiguration() | json }}</pre>
    </div>
  }
</div>
